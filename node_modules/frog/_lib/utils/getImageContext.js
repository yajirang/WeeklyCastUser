export async function getImageContext(parameters) {
    const { context, contextHono } = parameters;
    const { env, previousState, req } = context || {};
    return {
        context: {
            env,
            previousState: await (async () => {
                if (previousState)
                    return previousState;
                if (typeof parameters.initialState === 'function')
                    return await parameters.initialState(contextHono);
                return parameters.initialState;
            })(),
            req,
            res: (data) => ({ data, format: 'image', status: 'success' }),
            var: context.var,
        },
    };
}
//# sourceMappingURL=getImageContext.js.map